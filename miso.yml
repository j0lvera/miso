# Global defaults for content scanning
content_defaults:
  strategy: "first_lines"  # first_lines, full_file, or smart
  lines: 50               # Number of lines to scan (for first_lines and smart)

# Pattern matching rules (evaluated in order)
patterns:
  # Go test files - diff reviews focus on test coverage and quality
  - name: "go-test-files"
    filename: "_test\\.go$"
    context:
      - testing.md
      - go.md
    diff_context:
      - diff/breaking-changes.md  # Check if tests cover breaking changes
      - testing.md
    stop: true
  
  # Go files - general Go best practices
  - name: "go-files"
    filename: "\\.go$"
    context:
      - go.md
      - error-handling.md
    diff_context:
      - diff/breaking-changes.md  # Focus on API changes
      - go.md
  
  # HTTP handlers - security and performance focus in diffs
  - name: "http-handlers"
    filename: "/handlers/"
    context:
      - http-handlers.md
      - validation.md
    diff_context:
      - diff/security-review.md   # Security implications of handler changes
      - diff/performance-impact.md
      - http-handlers.md
  
  # Database code - performance and migration concerns
  - name: "database-code"
    content: "SELECT|INSERT|UPDATE|DELETE|gorm\\.|sql\\."
    content_strategy: "full_file"
    context:
      - database.md
      - sql-security.md
    diff_context:
      - diff/breaking-changes.md  # Schema changes
      - diff/performance-impact.md # Query performance
      - database.md
  
  # React components - focus on breaking changes and performance
  - name: "react-components"
    filename: "\\.(tsx|jsx)$"
    content: "import.*react|from ['\"]react"
    context:
      - react.md
      - components.md
    diff_context:
      - diff/breaking-changes.md  # Component API changes
      - diff/performance-impact.md # Rendering performance
      - react.md
  
  # Security-sensitive code - comprehensive security review
  - name: "security-sensitive"
    content: "password|token|secret|auth|crypto|jwt|session"
    content_strategy: "full_file"
    context:
      - security.md
    diff_context:
      - diff/security-review.md   # Primary focus on security
      - diff/breaking-changes.md  # Auth API changes
      - security.md
    stop: true  # Security issues need focused review
  
  # Configuration files - breaking changes focus
  - name: "config-files"
    filename: "\\.(yml|yaml|json|toml|env)$"
    context:
      - configuration.md
    diff_context:
      - diff/breaking-changes.md  # Config changes can break deployments
      - configuration.md
  
  # Migration files - special attention to breaking changes
  - name: "migrations"
    filename: "/migrations/|migration"
    context:
      - database.md
      - migrations.md
    diff_context:
      - diff/breaking-changes.md  # Schema changes
      - diff/performance-impact.md # Migration performance
      - migrations.md
    stop: true
